package com.onyx.kreader.host.request;import com.onyx.android.sdk.data.model.Annotation;import com.onyx.android.sdk.utils.FileUtils;import com.onyx.kreader.R;import com.onyx.kreader.common.BaseReaderRequest;import com.onyx.kreader.host.wrapper.Reader;import java.io.File;import java.util.List;/** * Created by ming on 2016/10/28. */public class ExportAnnotationRequest extends BaseReaderRequest {    private List<Annotation> annotations;    public ExportAnnotationRequest(List<Annotation> annotations) {        this.annotations = annotations;    }    @Override    public void execute(Reader reader) throws Exception {        StringBuilder content = new StringBuilder();        for (Annotation annotation : annotations) {            String item = getContext().getString(R.string.annotation_export_format, annotation.getPageNumber() + 1, annotation.getNote(), annotation.getQuote());            content.append(item);        }        String parent = FileUtils.getParent(reader.getDocumentPath());        String baseName = FileUtils.getBaseName(reader.getDocumentPath());        File file = new File(parent, baseName + "-annotation.txt");        FileUtils.saveContentToFile(content.toString(), file);    }}